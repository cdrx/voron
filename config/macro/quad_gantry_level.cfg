[gcode_macro QUAD_GANTRY_LEVEL]
rename_existing: QUAD_GANTRY_LEVEL_BASE
gcode:
  HOME_IF_NEEDED
  ATTACH_PROBE
  QUAD_GANTRY_LEVEL_BASE
  G28 Z
  DOCK_PROBE

[gcode_macro QGL_IF_NEEDED]
gcode:
  {% if printer.quad_gantry_level.applied|lower == 'false' %}
    QUAD_GANTRY_LEVEL
  {% endif %}
